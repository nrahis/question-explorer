<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Question Explorer!</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Comic+Neue:wght@400;700&family=Fredoka+One&display=swap');
        
        body {
            margin: 0;
            padding: 20px;
            background-color: #FF6B6B;
            font-family: 'Comic Neue', cursive;
            color: #2C3E50;
            min-height: 100vh;
            background-image: 
                radial-gradient(circle at 10% 20%, #FFE66D 15px, transparent 16px),
                radial-gradient(circle at 90% 80%, #4ECDC4 15px, transparent 16px),
                radial-gradient(circle at 40% 60%, #FF6B6B 10px, transparent 11px);
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            background-color: #FFFFFF;
            border: 6px solid #2C3E50;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 10px 10px 0 #2C3E50;
            position: relative;
        }
        
        .title {
            font-family: 'Fredoka One', cursive;
            font-size: 3em;
            color: #2C3E50;
            text-align: center;
            margin-bottom: 30px;
            text-transform: uppercase;
            position: relative;
        }
        
        .title::after {
            content: '?!';
            position: absolute;
            color: #FF6B6B;
            font-size: 0.8em;
            transform: rotate(15deg);
            margin-left: 10px;
        }
        
        .question-container {
            position: relative;
            margin-bottom: 30px;
        }
        
        .question-input {
            width: 100%;
            padding: 15px;
            font-size: 1.3em;
            border: 4px solid #2C3E50;
            border-radius: 10px;
            background-color: #FFE66D;
            font-family: 'Comic Neue', cursive;
            transition: all 0.3s ease;
        }
        
        .question-input:focus {
            outline: none;
            background-color: #FFFFFF;
            box-shadow: 5px 5px 0 #2C3E50;
        }
        
        .ask-button {
            background-color: #4ECDC4;
            color: #2C3E50;
            border: 4px solid #2C3E50;
            padding: 15px 30px;
            font-size: 1.5em;
            font-family: 'Fredoka One', cursive;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.2s ease;
            text-transform: uppercase;
            margin-top: 20px;
            display: block;
            width: 100%;
        }
        
        .ask-button:hover {
            transform: translate(-3px, -3px);
            box-shadow: 6px 6px 0 #2C3E50;
        }
        
        .ask-button:active {
            transform: translate(0, 0);
            box-shadow: 0 0 0 #2C3E50;
        }
        
        .ask-button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        
        .answer-box {
            background-color: #F7FFF7;
            border: 4px solid #2C3E50;
            border-radius: 15px;
            padding: 20px;
            margin-top: 30px;
            min-height: 200px;
            position: relative;
            display: none;
        }
        
        .answer-box.visible {
            display: block;
        }
        
        .loading {
            text-align: center;
            padding: 50px;
        }
        
        .loading-dots {
            display: inline-block;
            font-size: 2em;
            color: #4ECDC4;
        }
        
        .loading-dots span {
            animation: bounce 1.4s infinite ease-in-out both;
            margin: 0 5px;
            display: inline-block;
        }
        
        .loading-dots span:nth-child(1) { animation-delay: -0.32s; }
        .loading-dots span:nth-child(2) { animation-delay: -0.16s; }
        
        @keyframes bounce {
            0%, 80%, 100% { transform: scale(0); }
            40% { transform: scale(1.0); }
        }
        
        .answer-content {
            font-size: 1.2em;
            line-height: 1.6;
            white-space: pre-wrap;
        }
        
        .suggestions {
            margin-top: 40px;
            text-align: center;
        }
        
        .suggestions-title {
            font-family: 'Fredoka One', cursive;
            font-size: 1.5em;
            color: #2C3E50;
            margin-bottom: 15px;
        }
        
        .suggestion-button {
            background-color: #FFE66D;
            border: 3px solid #2C3E50;
            border-radius: 20px;
            padding: 8px 16px;
            margin: 5px;
            font-size: 1em;
            font-family: 'Comic Neue', cursive;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.2s ease;
            display: inline-block;
        }
        
        .suggestion-button:hover {
            background-color: #4ECDC4;
            transform: scale(1.05);
        }
        
        /* Decorative elements */
        .star {
            position: absolute;
            width: 20px;
            height: 20px;
            background-color: #FFE66D;
            clip-path: polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%);
        }
        
        .star-1 { top: -10px; left: 20px; transform: rotate(15deg); }
        .star-2 { top: -10px; right: 40px; transform: rotate(-20deg); }
        .star-3 { bottom: -10px; left: 50%; transform: rotate(30deg); }
        
        .error-message {
            color: #FF6B6B;
            text-align: center;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="star star-1"></div>
        <div class="star star-2"></div>
        <div class="star star-3"></div>
        
        <h1 class="title">Question Explorer</h1>
        
        <div class="question-container">
            <input type="text" class="question-input" placeholder="Ask me anything! (ex: How do airplanes fly?)">
            <button class="ask-button">Ask Away!</button>
        </div>
        
        <div class="answer-box" id="answerBox">
            <div class="loading" id="loading">
                <div class="loading-dots">
                    <span>●</span>
                    <span>●</span>
                    <span>●</span>
                </div>
                <p>Thinking...</p>
            </div>
            <div class="answer-content" id="answerContent"></div>
        </div>
        
        <div class="suggestions">
            <div class="suggestions-title">Try asking about:</div>
            <button class="suggestion-button" data-question="How big is the universe?">Space</button>
            <button class="suggestion-button" data-question="Why do we dream?">Dreams</button>
            <button class="suggestion-button" data-question="How do computers think?">Computers</button>
            <button class="suggestion-button" data-question="What makes rainbows?">Nature</button>
            <button class="suggestion-button" data-question="How do animals communicate?">Animals</button>
        </div>
    </div>

    <script>
        const questionInput = document.querySelector('.question-input');
        const askButton = document.querySelector('.ask-button');
        const answerBox = document.getElementById('answerBox');
        const loading = document.getElementById('loading');
        const answerContent = document.getElementById('answerContent');
        const suggestionButtons = document.querySelectorAll('.suggestion-button');

        // This is the system prompt that will make the AI respond in a kid-friendly way
        const SYSTEM_PROMPT = `You are a friendly explainer for kids aged 8-12. Please:
1. Use simple language they can understand
2. Make comparisons to things they know from everyday life
3. Include fun analogies (like comparing the age of the universe to a human lifespan)
4. Break down complex ideas into smaller, digestible parts
5. Be encouraging and spark curiosity
6. Use examples from their world (school, playground, home)
7. When dealing with numbers, convert them to relatable scales
8. Keep answers engaging but not condescending
9. Add interesting "wow" facts when relevant
10. Encourage further exploration with follow-up questions`;

        // Function to call your backend API
        async function getAnswer(question) {
            // You'll need to replace this with your actual backend endpoint
            const API_ENDPOINT = '/.netlify/functions/ask'; // Replace with your backend URL
            
            try {
                const response = await fetch(API_ENDPOINT, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        question: question,
                        systemPrompt: SYSTEM_PROMPT
                    })
                });

                if (!response.ok) {
                    throw new Error('Network response was not ok');
                }

                const data = await response.json();
                return data.answer;
            } catch (error) {
                console.error('Error:', error);
                throw error;
            }
        }

        async function askQuestion() {
            const question = questionInput.value.trim();
            if (!question) return;

            // Disable button while loading
            askButton.disabled = true;
            
            answerBox.classList.add('visible');
            loading.style.display = 'block';
            answerContent.style.display = 'none';

            try {
                const answer = await getAnswer(question);
                loading.style.display = 'none';
                answerContent.style.display = 'block';
                answerContent.textContent = answer;
            } catch (error) {
                loading.style.display = 'none';
                answerContent.style.display = 'block';
                answerContent.innerHTML = '<div class="error-message">Oops! Something went wrong. Let\'s try again!</div>';
            } finally {
                // Re-enable button
                askButton.disabled = false;
            }
        }

        askButton.addEventListener('click', askQuestion);
        
        questionInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter' && !askButton.disabled) {
                askQuestion();
            }
        });

        suggestionButtons.forEach(button => {
            button.addEventListener('click', () => {
                questionInput.value = button.dataset.question;
                askQuestion();
            });
        });

        // Example of a mock backend for testing - remove this when you have a real backend
        // Uncomment this section to test without a backend:
        /*
        async function getAnswer(question) {
            return new Promise((resolve) => {
                setTimeout(() => {
                    resolve(`This is a mock answer to: "${question}"\n\nIn a real setup, this would connect to DeepSeek API and provide a kid-friendly explanation with analogies and simple language.`);
                }, 2000);
            });
        }
        */
    </script>
</body>
</html>
